# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ —á–µ—Ä–µ–∑ –ø–æ–¥—Å–µ–∫—Ü–∏–∏

## –¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:
1. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø—Ä–µ–¥–∏–∫—Ç–∞–º —Å–æ–≤–ø–∞–¥–∞—é—Ç** —Å –æ–±—ã—á–Ω—ã–º –º–µ—Ç–æ–¥–æ–º
2. **–ú–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ –ø–æ–¥—Å–µ–∫—Ü–∏–∏ –±—ã—Å—Ç—Ä–µ–µ** —á–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ–π —Å–µ–∫—Ü–∏–∏

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞

```bash
cd /mnt/ai/cnn/sc
python test/test_predict_via_subsections.py
```

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ—Å—Ç

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–∫–æ—Ä–µ–Ω–∏—è ‚è±Ô∏è

- –ò–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±–æ–∏—Ö –º–µ—Ç–æ–¥–æ–≤
- –í—ã—á–∏—Å–ª—è–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–∏–µ (speedup)
- **–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞**: speedup > 1.0 (–º–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ –ø–æ–¥—Å–µ–∫—Ü–∏–∏ –±—ã—Å—Ç—Ä–µ–µ)

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
‚è±Ô∏è  –¢–ï–°–¢ 1: –ü–†–û–í–ï–†–ö–ê –£–°–ö–û–†–ï–ù–ò–Ø
   –í—Ä–µ–º—è –æ–±—ã—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞: 45.23 —Å–µ–∫
   –í—Ä–µ–º—è —á–µ—Ä–µ–∑ –ø–æ–¥—Å–µ–∫—Ü–∏–∏: 12.34 —Å–µ–∫
   –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 3.67x
   ‚úÖ –ú–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ –ø–æ–¥—Å–µ–∫—Ü–∏–∏ –ë–´–°–¢–†–ï–ï –Ω–∞ 267.0%
```

### –¢–µ—Å—Ç 2: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ predictions üìä

- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–∏–∫—Ç–æ–≤
- –í—ã—á–∏—Å–ª—è–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—É—é —Ä–∞–∑–Ω–∏—Ü—É
- **–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞**: —Ä–∞–∑–Ω–∏—Ü–∞ < 10%

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìä –¢–ï–°–¢ 2: –°–†–ê–í–ù–ï–ù–ò–ï –ö–û–õ–ò–ß–ï–°–¢–í–ê PREDICTIONS
   –û–±—ã—á–Ω—ã–π –º–µ—Ç–æ–¥: 1234
   –ß–µ—Ä–µ–∑ –ø–æ–¥—Å–µ–∫—Ü–∏–∏: 1201
   –†–∞–∑–Ω–∏—Ü–∞: 33 (2.7%)
   ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ predictions –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç (—Ä–∞–∑–Ω–∏—Ü–∞ < 10%)
```

### –¢–µ—Å—Ç 3: –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –∫–ª–∞—Å—Å–∞–º üìä

- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–∏–∫—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –ø–æ –∫–∞–∂–¥–æ–º—É –∫–ª–∞—Å—Å—É
- **–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞**: —Ä–∞–∑–Ω–∏—Ü–∞ < 15% –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìä –¢–ï–°–¢ 3: –î–ï–¢–ê–õ–¨–ù–û–ï –°–†–ê–í–ù–ï–ù–ò–ï PREDICTIONS –ü–û –ö–õ–ê–°–°–ê–ú
   ‚úÖ Mild:
      –°—Ç–∞–Ω–¥–∞—Ä—Ç: 45, –ü–æ–¥—Å–µ–∫—Ü–∏–∏: 43, –†–∞–∑–Ω–∏—Ü–∞: 2 (4.4%)
   ‚úÖ Moderate:
      –°—Ç–∞–Ω–¥–∞—Ä—Ç: 12, –ü–æ–¥—Å–µ–∫—Ü–∏–∏: 11, –†–∞–∑–Ω–∏—Ü–∞: 1 (8.3%)
   ‚ö†Ô∏è  Granulomas:
      –°—Ç–∞–Ω–¥–∞—Ä—Ç: 8, –ü–æ–¥—Å–µ–∫—Ü–∏–∏: 12, –†–∞–∑–Ω–∏—Ü–∞: 4 (50.0%)
```

### –¢–µ—Å—Ç 4: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ üìä

- –î–ª—è –∫–ª–∞—Å—Å–æ–≤ —Å –Ω–µ–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø—Ä–µ–¥–∏–∫—Ç–æ–≤ (‚â§50)
- –°–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–∏–∫—Ç—ã –ø–æ IoU
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (confidence)
- **–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞**: 
  - –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ > 70% –ø—Ä–µ–¥–∏–∫—Ç–æ–≤
  - –°—Ä–µ–¥–Ω–∏–π IoU > 0.7

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìä –¢–ï–°–¢ 4: –°–†–ê–í–ù–ï–ù–ò–ï –ü–û–ó–ò–¶–ò–ô –ò –£–í–ï–†–ï–ù–ù–û–°–¢–ò PREDICTIONS
   ‚úÖ Mild:
      –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ: 40/45 (88.9%)
      –°—Ä–µ–¥–Ω–∏–π IoU: 0.856
      –°—Ä–µ–¥–Ω—è—è —Ä–∞–∑–Ω–∏—Ü–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏: 0.023
```

## –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ—Å—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è **—É—Å–ø–µ—à–Ω—ã–º**, –µ—Å–ª–∏:
- ‚úÖ –ú–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ –ø–æ–¥—Å–µ–∫—Ü–∏–∏ –±—ã—Å—Ç—Ä–µ–µ (speedup > 1.0)
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø—Ä–µ–¥–∏–∫—Ç–∞–º —Å–æ–≤–ø–∞–¥–∞—é—Ç (—Ä–∞–∑–Ω–∏—Ü–∞ < 10-15%)

### –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

1. **‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´**
   - –ú–µ—Ç–æ–¥ –±—ã—Å—Ç—Ä–µ–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç

2. **‚ö†Ô∏è  –ß–ê–°–¢–ò–ß–ù–û –ü–†–û–ô–î–ï–ù–û**
   - –ú–µ—Ç–æ–¥ –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ —Ä–∞–∑–ª–∏—á–∏—è –≤ –ø—Ä–µ–¥–∏–∫—Ç–∞—Ö
   - –ò–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç, –Ω–æ –Ω–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–∏—è

3. **‚ùå –¢–ï–°–¢–´ –ù–ï –ü–†–û–ô–î–ï–ù–´**
   - –ú–µ—Ç–æ–¥ –Ω–µ –±—ã—Å—Ç—Ä–µ–µ –ò–õ–ò –µ—Å—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è

## –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `results/predictions/`:
- `{wsi_name}_section_0_standard.json` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—ã—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞
- `{wsi_name}_section_0_via_subsections.json` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ –ø–æ–¥—Å–µ–∫—Ü–∏–∏

–≠—Ç–∏ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

## –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ï—Å–ª–∏ —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ—à–µ–ª

1. **–ù–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–∏—è (speedup < 1.0)**
   - –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ–¥—Å–µ–∫—Ü–∏–π —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–º–µ–Ω—å—à–∏—Ç—å `num_subsections`
   - –ò–ª–∏ –ø–æ–¥—Å–µ–∫—Ü–∏–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ

2. **–ë–æ–ª—å—à–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –ø—Ä–µ–¥–∏–∫—Ç–∞—Ö (>15%)**
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –ø–æ–¥—Å–µ–∫—Ü–∏–∏ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞—é—Ç —Å–µ–∫—Ü–∏—é
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ–¥—Å–µ–∫—Ü–∏–π
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

3. **–ù–∏–∑–∫–∏–π IoU –ø—Ä–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ (<0.7)**
   - –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Å—Ç–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ NMS –∏ merge
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö WSI —Ñ–∞–π–ª–∞—Ö –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`overlap_ratio`, `num_sections`) –¥–ª—è –æ–±–æ–∏—Ö –º–µ—Ç–æ–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ–¥—Å–µ–∫—Ü–∏–π –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º






# –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∫–∞–ª—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞

## –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å `cluster_scoring.py` —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–í–∞—Ä–∏–∞–Ω—Ç C** –∏–∑ –≠—Ç–∞–ø–∞ 5 –ø–ª–∞–Ω–∞ - –º–∞–ø–ø–∏–Ω–≥ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –Ω–∞ —à–∫–∞–ª—É –æ—Ü–µ–Ω–∫–∏ –ø–∞—Ç–æ–ª–æ–≥–∏–∏ –æ—Ç 0 –¥–æ 1.

**–í–∞–∂–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ú–æ–¥—É–ª—å —Ç–µ–ø–µ—Ä—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å–æ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º –¥–ª—è –µ–¥–∏–Ω–æ–π —à–∫–∞–ª—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É—á–µ—Ç–∞ –º–æ–¥ (—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π) –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ø–∞—Ç–æ–ª–æ–≥–∏–π.

## –ü–æ–¥—Ö–æ–¥—ã –∫ –º–∞–ø–ø–∏–Ω–≥—É –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –Ω–∞ score

### 1. **–ù–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤** (`pathology_features`) - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ö–ª–∞—Å—Ç–µ—Ä—ã —Å –≤—ã—Å–æ–∫–∏–º–∏ —Å—Ä–µ–¥–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –ø–æ–ª—É—á–∞—é—Ç –≤—ã—Å–æ–∫–∏–π score.

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –í—ã—á–∏—Å–ª—è—é—Ç—Å—è –º–µ–¥–∏–∞–Ω—ã –∏–ª–∏ —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (Dysplasia, Mild, Moderate, EoE) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
2. –°—É–º–º–∏—Ä—É—é—Ç—Å—è —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
3. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—É–º–º—ã –≤ –¥–∏–∞–ø–∞–∑–æ–Ω [0, 1] —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ (P1/P99) –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫ –≤—ã–±—Ä–æ—Å–∞–º

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü—Ä—è–º–∞—è —Å–≤—è–∑—å —Å –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
- –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å

**–ü—Ä–∏–º–µ—Ä:**
```python
from scale import clustering, cluster_scoring

# –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
clusterer = clustering.ClusterAnalyzer(method="hdbscan")
clusterer.fit(df_features)

# –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞ score
scorer = cluster_scoring.ClusterScorer(method="pathology_features")
df_with_scores = scorer.fit_transform(df_features, clusterer=clusterer)
```

### 2. **–ù–∞ –æ—Å–Ω–æ–≤–µ PC1 —Ü–µ–Ω—Ç—Ä–æ–∏–¥–æ–≤** (`pc1_centroid`)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ PC1 (–ø–µ—Ä–≤–∞—è –≥–ª–∞–≤–Ω–∞—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞.

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –º–µ–¥–∏–∞–Ω–∞ –∏–ª–∏ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ PC1 –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
2. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è PC1 –∑–Ω–∞—á–µ–Ω–∏–π –≤ –¥–∏–∞–ø–∞–∑–æ–Ω [0, 1] —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ (P1/P99)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –≤—ã—á–∏—Å–ª–µ–Ω–Ω—É—é PCA –ø—Ä–æ–µ–∫—Ü–∏—é
- –ë—ã—Å—Ç—Ä–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å PCA –º–µ—Ç–æ–¥–æ–º

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –¢—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ PCA –∞–Ω–∞–ª–∏–∑–∞
- –ú–µ–Ω–µ–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º–æ, —á–µ–º –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏

**–ü—Ä–∏–º–µ—Ä:**
```python
# –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π PCA –∞–Ω–∞–ª–∏–∑
from scale import spectral_analysis

analyzer = spectral_analysis.SpectralAnalyzer()
analyzer.fit_pca(df_features)
df_pca = analyzer.transform_pca(df_features)

# –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ PCA –¥–∞–Ω–Ω—ã—Ö
clusterer.fit(df_pca)

# –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ PC1
scorer = cluster_scoring.ClusterScorer(method="pc1_centroid")
df_with_scores = scorer.fit_transform(df_pca, clusterer=clusterer)
```

### 3. **–ù–∞ –æ—Å–Ω–æ–≤–µ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏** (`expert_labels`)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ü–∞—Ç–æ–º–æ—Ä—Ñ–æ–ª–æ–≥ —Ä–∞–∑–º–µ—á–∞–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä—ã, –ø—Ä–∏—Å–≤–∞–∏–≤–∞—è –∫–∞–∂–¥–æ–º—É score –æ—Ç 0 –¥–æ 1.

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –≠–∫—Å–ø–µ—Ä—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω—ã–µ –æ–±—Ä–∞–∑—Ü—ã –∏–∑ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
2. –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∫–∞–∂–¥–æ–º—É –∫–ª–∞—Å—Ç–µ—Ä—É score (–Ω–∞–ø—Ä–∏–º–µ—Ä: –∫–ª–∞—Å—Ç–µ—Ä 0 = 0.1, –∫–ª–∞—Å—Ç–µ—Ä 1 = 0.7, –∫–ª–∞—Å—Ç–µ—Ä 2 = 0.9)
3. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫ –≤ [0, 1]

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–µ –º–Ω–µ–Ω–∏–µ
- –ù–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –º–µ—Ç–æ–¥ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —ç–∫—Å–ø–µ—Ä—Ç–∞
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Ç–æ–¥–æ–≤

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –¢—Ä–µ–±—É–µ—Ç —É—á–∞—Å—Ç–∏—è —ç–∫—Å–ø–µ—Ä—Ç–∞
- –¢—Ä—É–¥–æ–µ–º–∫–æ –¥–ª—è –±–æ–ª—å—à–æ–≥–æ —á–∏—Å–ª–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```python
# –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞
expert_labels = {
    0: 0.1,  # –ù–æ—Ä–º–∞
    1: 0.5,  # –õ–µ–≥–∫–∞—è –ø–∞—Ç–æ–ª–æ–≥–∏—è
    2: 0.8,  # –£–º–µ—Ä–µ–Ω–Ω–∞—è –ø–∞—Ç–æ–ª–æ–≥–∏—è
    3: 0.95, # –¢—è–∂–µ–ª–∞—è –ø–∞—Ç–æ–ª–æ–≥–∏—è
}

scorer = cluster_scoring.ClusterScorer(method="expert_labels")
df_with_scores = scorer.fit_transform(
    df_features, 
    clusterer=clusterer,
    expert_labels=expert_labels
)
```

### 4. **–ù–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞** (`distance_from_normal`)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –æ—Ç "–Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ" –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä (—Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏)
2. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –µ–≤–∫–ª–∏–¥–æ–≤–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –¥–æ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
3. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –≤ [0, 1] —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ (P1/P99)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ—Ä–º—ã
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —á–µ—Ç–∫–æ–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–∏ –Ω–æ—Ä–º–∞/–ø–∞—Ç–æ–ª–æ–≥–∏—è

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ –º–∞—Å—à—Ç–∞–±—É –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
- –¢—Ä–µ–±—É–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```python
scorer = cluster_scoring.ClusterScorer(method="distance_from_normal")
df_with_scores = scorer.fit_transform(
    df_features,
    clusterer=clusterer,
    normal_cluster=0  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —É–∫–∞–∑–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä –≤—Ä—É—á–Ω—É—é
)
```

### 5. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å–æ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º** (`spectrum_projection`) ‚≠ê **–ù–û–í–´–ô**

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ü—Ä–æ–µ—Ü–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä—ã –Ω–∞ –µ–¥–∏–Ω—É—é —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—É—é —à–∫–∞–ª—É, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ –∏ –º–æ–¥—ã –∏–∑ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—É—á–µ–Ω–Ω—ã–π `SpectralAnalyzer` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–µ–π (P1/P99) –∏ –º–æ–¥
2. –í—ã—á–∏—Å–ª—è–µ—Ç –º–µ–¥–∏–∞–Ω—É PC1 –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ (—É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤)
3. –ü—Ä–æ–µ—Ü–∏—Ä—É–µ—Ç —Ü–µ–Ω—Ç—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –Ω–∞ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—É—é —à–∫–∞–ª—É —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏: `spectrum_score = (PC1_median - PC1_p1) / (PC1_p99 - PC1_p1)`
4. –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä—ã –ø–æ –±–ª–∏–∂–∞–π—à–∏–º –º–æ–¥–∞–º –∏–∑ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ (–º–µ–¥–∏–∞–Ω–∞, –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ï–¥–∏–Ω–∞—è —à–∫–∞–ª–∞** —Å —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- ‚úÖ **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –≤—ã–±—Ä–æ—Å–∞–º** —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ –∏ –º–µ–¥–∏–∞–Ω—É
- ‚úÖ **–£—á–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π** –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ (–Ω–µ —Ç–æ–ª—å–∫–æ —Ü–µ–Ω—Ç—Ä–æ–∏–¥—ã)
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥–∞–º–∏** –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ –º–æ–¥–∞–º (normal/mild/moderate/severe)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –¢—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è `SpectralAnalyzer`
- –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏, —á–µ–º –ø—Ä–æ—Å—Ç—ã–µ –º–µ—Ç–æ–¥—ã

**–ü—Ä–∏–º–µ—Ä:**
```python
from scale import clustering, cluster_scoring, spectral_analysis

# 1. –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (—Å–æ–∑–¥–∞–µ—Ç –µ–¥–∏–Ω—É—é —à–∫–∞–ª—É)
spectral_analyzer = spectral_analysis.SpectralAnalyzer()
spectral_analyzer.fit_pca(df_features)
df_pca = spectral_analyzer.transform_pca(df_features)
spectral_analyzer.fit_spectrum(df_pca, percentile_low=1.0, percentile_high=99.0)

# 2. –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
clusterer = clustering.ClusterAnalyzer(method="hdbscan")
clusterer.fit(df_features, use_pca=True, min_cluster_size=2)
df_with_clusters = clusterer.transform(df_features)

# 3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—É—é —à–∫–∞–ª—É
scorer = cluster_scoring.ClusterScorer(
    method="spectrum_projection",
    use_percentiles=True,
    percentile_low=1.0,
    percentile_high=99.0
)
df_with_scores = scorer.fit_transform(
    df_features,
    clusterer=clusterer,
    spectral_analyzer=spectral_analyzer,
    use_cluster_distribution=True  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–¥–∏–∞–Ω—É –≤–º–µ—Å—Ç–æ —Å—Ä–µ–¥–Ω–µ–≥–æ
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç: DataFrame —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
# - cluster: ID –∫–ª–∞—Å—Ç–µ—Ä–∞
# - cluster_score: score –æ—Ç 0 –¥–æ 1 (–Ω–∞ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–æ–π —à–∫–∞–ª–µ)
# - cluster_mode: –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –º–æ–¥–∞–º (normal/mild/moderate/severe)

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
cluster_modes = scorer.get_cluster_modes()  # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ –º–æ–¥–∞–º
cluster_distributions = scorer.get_cluster_distributions()  # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
```python
# –ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
distributions = scorer.get_cluster_distributions()
# {cluster_id: {"median": float, "mean": float, "p25": float, "p75": float, "std": float, "count": int}}

# –ü–æ–ª—É—á–∏—Ç—å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ –º–æ–¥–∞–º
modes = scorer.get_cluster_modes()
# {cluster_id: "normal" | "mild" | "moderate" | "severe"}
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É –º–µ—Ç–æ–¥–∞

### –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã:
1. **`pathology_features`** - –Ω–∞–∏–±–æ–ª–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã–π –º–µ—Ç–æ–¥
2. –ï—Å–ª–∏ –µ—Å—Ç—å PCA —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **`pc1_centroid`**

### –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
1. **`spectrum_projection`** ‚≠ê - –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä—ã —Å–æ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º
   - –ï–¥–∏–Ω–∞—è —à–∫–∞–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
   - –£—á–µ—Ç –º–æ–¥ (—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π)
   - –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –≤—ã–±—Ä–æ—Å–∞–º —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ –∏ –º–µ–¥–∏–∞–Ω—É
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –º–æ–¥–∞–º

### –î–ª—è —Ç–æ—á–Ω–æ–π –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏:
1. **`expert_labels`** - –µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ç–æ–º–æ—Ä—Ñ–æ–ª–æ–≥—É
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Ç–æ–¥–æ–≤

### –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:
1. **`distance_from_normal`** - –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–µ–π

```python
from scale import clustering, cluster_scoring

# 1. –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
clusterer = clustering.ClusterAnalyzer(method="hdbscan")
clusterer.fit(df_features, use_pca=True, min_cluster_size=2)

# 2. –ú–∞–ø–ø–∏–Ω–≥ –Ω–∞ score
scorer = cluster_scoring.ClusterScorer(method="pathology_features")
df_with_scores = scorer.fit_transform(df_features, clusterer=clusterer)

# –†–µ–∑—É–ª—å—Ç–∞—Ç: DataFrame —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
# - cluster: ID –∫–ª–∞—Å—Ç–µ—Ä–∞
# - cluster_score: score –æ—Ç 0 –¥–æ 1
```

## –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

- **Score = 0.0 - 0.3**: –ù–æ—Ä–º–∞ –∏–ª–∏ –ª–µ–≥–∫–∞—è –ø–∞—Ç–æ–ª–æ–≥–∏—è
- **Score = 0.3 - 0.7**: –£–º–µ—Ä–µ–Ω–Ω–∞—è –ø–∞—Ç–æ–ª–æ–≥–∏—è
- **Score = 0.7 - 1.0**: –¢—è–∂–µ–ª–∞—è –ø–∞—Ç–æ–ª–æ–≥–∏—è

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏

| –ú–µ—Ç–æ–¥ | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ | –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ |
|-------|-------------|------------|
| **PCA Scoring** | –ü—Ä–æ—Å—Ç–æ–π, –±—ã—Å—Ç—Ä—ã–π | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–µ—Ä–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| **Spectral Analysis** | –£—á–∏—Ç—ã–≤–∞–µ—Ç –º–æ–¥—ã, —É—Å—Ç–æ–π—á–∏–≤ –∫ –≤—ã–±—Ä–æ—Å–∞–º | –°–ª–æ–∂–Ω–µ–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å |
| **Cluster Scoring** | –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º | –¢—Ä–µ–±—É–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ |
| **Cluster + Spectral** ‚≠ê | –ï–¥–∏–Ω–∞—è —à–∫–∞–ª–∞, –º–æ–¥—ã + –∫–ª–∞—Å—Ç–µ—Ä—ã, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –≤—ã–±—Ä–æ—Å–∞–º | –¢—Ä–µ–±—É–µ—Ç –æ–±–∞ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ |

## –£–ª—É—á—à–µ–Ω–∏—è –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

–í—Å–µ –º–µ—Ç–æ–¥—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ (P1/P99)** –≤–º–µ—Å—Ç–æ min-max –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è:
- ‚úÖ –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫ –≤—ã–±—Ä–æ—Å–∞–º
- ‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ —Å–æ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º
- ‚úÖ –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
```python
scorer = cluster_scoring.ClusterScorer(
    method="pathology_features",
    use_percentiles=True,      # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é True)
    percentile_low=1.0,         # –ù–∏–∂–Ω–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1.0)
    percentile_high=99.0       # –í–µ—Ä—Ö–Ω–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 99.0)
)
```

## –£—á–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–º–µ–¥–∏–∞–Ω—É** –≤–º–µ—Å—Ç–æ —Å—Ä–µ–¥–Ω–µ–≥–æ –¥–ª—è –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤–æ–π –æ—Ü–µ–Ω–∫–∏:
- –ú–µ–¥–∏–∞–Ω–∞ –º–µ–Ω–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ –≤—ã–±—Ä–æ—Å–∞–º –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Ü–µ–Ω—Ç—Ä–æ–∏–¥

–ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `use_cluster_distribution=False`:
```python
scorer.fit(
    df_features,
    clusterer=clusterer,
    use_cluster_distribution=False  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –≤–º–µ—Å—Ç–æ –º–µ–¥–∏–∞–Ω—ã
)
```

## –†–∞–±–æ—Ç–∞ –≤ –≤–µ–±-–¥–∞—à–±–æ—Ä–¥–µ

–ú–æ–¥—É–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≤–µ–±-–¥–∞—à–±–æ—Ä–¥ Streamlit. –ü–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã:

### 1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–≤–∫–ª–∞–¥–∫–∞ "üî¨ –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑")
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ
- –í–∫–ª—é—á–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑"
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é P1/P99)
- –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `session_state`

### 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é (–≤–∫–ª–∞–¥–∫–∞ "üîó –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è")
- –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ (HDBSCAN, Agglomerative, KMeans)
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Ä–∞–∑–º–µ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞, —á–∏—Å–ª–æ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤, PCA)
- –ù–∞–∂–º–∏—Ç–µ "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é"

### 3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –Ω–∞ score
- –ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –º–µ—Ç–æ–¥ `spectrum_projection` ‚≠ê
- –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –º–∞–ø–ø–∏–Ω–≥–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
- –ù–∞–∂–º–∏—Ç–µ "üéØ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ score"
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∑—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
  - `cluster_score`: score –æ—Ç 0 –¥–æ 1
  - `cluster_mode`: –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –º–æ–¥–∞–º (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `spectrum_projection`)

### 4. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –¢–∞–±–ª–∏—Ü–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç score –∏ –º–æ–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ expander
- CSV —ç–∫—Å–ø–æ—Ä—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏

### 5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ç–æ—Ä –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- Cluster Scorer –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω –º–∞–ø–ø–∏–Ω–≥)
- –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤ CSV

**–í–∞–∂–Ω–æ:** –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–∞ `spectrum_projection` —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑!

## –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞

```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
scorer.save("models/cluster_scorer.pkl")

# –ó–∞–≥—Ä—É–∑–∫–∞
scorer = cluster_scoring.ClusterScorer.load("models/cluster_scorer.pkl")
```

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í–µ—Ä—Å–∏—è 2.0 (—Ç–µ–∫—É—â–∞—è)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º (`spectrum_projection`)
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ (P1/P99) –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö
- ‚úÖ –£—á–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ (–º–µ–¥–∏–∞–Ω–∞ –≤–º–µ—Å—Ç–æ —Å—Ä–µ–¥–Ω–µ–≥–æ)
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ –º–æ–¥–∞–º
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≤–µ–±-–¥–∞—à–±–æ—Ä–¥

### –í–µ—Ä—Å–∏—è 1.0 (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)
- –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –º–∞–ø–ø–∏–Ω–≥–∞ (`pathology_features`, `pc1_centroid`, `expert_labels`, `distance_from_normal`)
- Min-max –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Ü–µ–Ω—Ç—Ä–æ–∏–¥–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤


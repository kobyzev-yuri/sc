# –ö–∞–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤ Streamlit

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ Streamlit **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∞–Ω–∞–ª–∏–∑** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫!

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∞—à–±–æ—Ä–¥:**
   ```bash
   streamlit run scale/dashboard.py
   ```

2. **–ò–∑–º–µ–Ω–∏—Ç–µ –ª—é–±—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏:**
   - ‚úÖ –í–∫–ª—é—á–∏—Ç–µ/–≤—ã–∫–ª—é—á–∏—Ç–µ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏"
   - ‚úÖ –ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ (—Å–ª–∞–π–¥–µ—Ä—ã)
   - ‚úÖ –í–∫–ª—é—á–∏—Ç–µ/–≤—ã–∫–ª—é—á–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑"
   - ‚úÖ –í–∫–ª—é—á–∏—Ç–µ/–≤—ã–∫–ª—é—á–∏—Ç–µ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GMM –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π"
   - ‚úÖ –ò–∑–º–µ–Ω–∏—Ç–µ –≤—ã–±–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤

3. **Streamlit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –∞–Ω–∞–ª–∏–∑!**
   - –í–µ—Å—å –∫–æ–¥ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –∑–∞–Ω–æ–≤–æ
   - PCA –±—É–¥–µ—Ç –ø–µ—Ä–µ–æ–±—É—á–µ–Ω
   - –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω
   - –í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ –æ–±–Ω–æ–≤—è—Ç—Å—è

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ:

### 1. –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∏ 307-350)
```python
# –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
with st.spinner("–ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö..."):
    rows = []
    for image_name, preds in predictions.items():
        stats = aggregate.aggregate_predictions_from_dict(preds, image_name)
        rows.append(stats)
    df = pd.DataFrame(rows)
    
    if use_relative_features:
        df_features = aggregate.create_relative_features(df)
        df_features = aggregate.select_feature_columns(df_features)  # ‚Üê –ó–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ Paneth!
```

### 2. –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (—Å—Ç—Ä–æ–∫–∏ 663-686)
```python
if use_spectral_analysis and len(df_features) > 0:
    with st.spinner("–û–±—É—á–µ–Ω–∏–µ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞..."):
        analyzer = spectral_analysis.SpectralAnalyzer()
        
        # PCA - –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏
        analyzer.fit_pca(df_features)
        
        # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ PCA
        df_pca = analyzer.transform_pca(df_features)
        
        # –ê–Ω–∞–ª–∏–∑ —Å–ø–µ–∫—Ç—Ä–∞ - –ø–µ—Ä–µ—Å—á–µ—Ç —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
        analyzer.fit_spectrum(
            df_pca,
            percentile_low=percentile_low,  # ‚Üê –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Å–ª–∞–π–¥–µ—Ä–æ–≤
            percentile_high=percentile_high,
        )
        
        # GMM (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
        if st.checkbox("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GMM –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π"):
            analyzer.fit_gmm(df_pca)
        
        # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—É—é —à–∫–∞–ª—É
        df_spectrum = analyzer.transform_to_spectrum(df_pca)
```

## –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Paneth:

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –¥–æ–±–∞–≤–∏–ª–∏ Paneth –≤ `select_feature_columns()`, –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∞–Ω–∞–ª–∏–∑–∞:

1. ‚úÖ **Paneth_relative_count** –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–∏–∑–Ω–∞–∫–∏
2. ‚úÖ **Paneth_relative_area** –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–∏–∑–Ω–∞–∫–∏  
3. ‚úÖ **Paneth_mean_relative_area** –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–∏–∑–Ω–∞–∫–∏
4. ‚úÖ PCA –±—É–¥–µ—Ç –ø–µ—Ä–µ–æ–±—É—á–µ–Ω —Å —É—á–µ—Ç–æ–º Paneth
5. ‚úÖ –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏

## –ö–∞–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ —Å Paneth:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥: `streamlit run scale/dashboard.py`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ results/predictions"
3. **–ü—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏—Ç–µ –ª—é–±—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Å–ª–∞–π–¥–µ—Ä –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–µ–π)
4. Streamlit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –≤–µ—Å—å –∞–Ω–∞–ª–∏–∑ —Å –Ω–æ–≤—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ Paneth!

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:

- **–ö–Ω–æ–ø–∫–∞ "Rerun"** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É Streamlit (–∏–ª–∏ `R` –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ)
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª—é–±–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞** (—á–µ–∫–±–æ–∫—Å, —Å–ª–∞–π–¥–µ—Ä, –≤—ã–±–æ—Ä)
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F5)

## –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ Paneth –≤–∫–ª—é—á–µ–Ω:

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"üìä –î–∞–Ω–Ω—ã–µ"** –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–æ–Ω–∫–∏:
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: `Paneth_relative_count`, `Paneth_relative_area`, `Paneth_mean_relative_area`

–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"üéØ –í—ã–±–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤"** - Paneth –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.

## –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ score (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑)

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∫–ª–∞–¥–æ–∫:

**–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –≤–∫–ª–∞–¥–∫—É "üî¨ –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑"** –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–æ–º—É –∞–Ω–∞–ª–∏–∑—É.

### –ü–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã:

1. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑** (–≤–∫–ª–∞–¥–∫–∞ "üî¨ –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑")
   - –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –µ–¥–∏–Ω—É—é —à–∫–∞–ª—É –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
   - –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `session_state`

2. **–í —Ç–æ–π –∂–µ –≤–∫–ª–∞–¥–∫–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é** (—Å–µ–∫—Ü–∏—è "üîó –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–æ–º—É –∞–Ω–∞–ª–∏–∑—É")
   - –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Å–µ–∫—Ü–∏—é –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ (–æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–∏–∑—É –≤–∫–ª–∞–¥–∫–∏ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞)
   - –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - –ù–∞–∂–º–∏—Ç–µ "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é"

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∞–ø–ø–∏–Ω–≥ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –Ω–∞ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—É—é —à–∫–∞–ª—É**
   - –ú–µ—Ç–æ–¥ `spectrum_projection` ‚≠ê –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Ç–∞–∫ –∫–∞–∫ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)
   - –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –º–∞–ø–ø–∏–Ω–≥–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è `spectrum_projection`)
   - –ù–∞–∂–º–∏—Ç–µ "üéØ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ score"

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

- ‚úÖ **–ï–¥–∏–Ω–∞—è —à–∫–∞–ª–∞**: –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—É—é —à–∫–∞–ª—É, —á—Ç–æ –∏ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- ‚úÖ **–õ–æ–≥–∏—á–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫**: –°–Ω–∞—á–∞–ª–∞ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –∑–∞—Ç–µ–º –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ú–µ—Ç–æ–¥ `spectrum_projection` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è**: –í—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –≤ –æ–¥–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏:

- –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ (–º–µ—Ç–æ–¥, —Ä–∞–∑–º–µ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞, —á–∏—Å–ª–æ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤)
- –ù–∞–∂–º–∏—Ç–µ "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é" —Å–Ω–æ–≤–∞
- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–∞

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –º–∞–ø–ø–∏–Ω–≥–∞ –Ω–∞ score:

- –ò–∑–º–µ–Ω–∏—Ç–µ –º–µ—Ç–æ–¥ –º–∞–ø–ø–∏–Ω–≥–∞
- –ù–∞–∂–º–∏—Ç–µ "üéØ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ score" —Å–Ω–æ–≤–∞
- –ú–∞–ø–ø–∏–Ω–≥ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏

**–í–∞–∂–Ω–æ:** –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–∞ `spectrum_projection` —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤ —Ç–æ–π –∂–µ –≤–∫–ª–∞–¥–∫–µ!







# –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "Tried to use SessionInfo before it was initialized"

## ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞
–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ `safe_session_get`, `safe_session_set` –∏ –¥—Ä—É–≥–∏–µ –≤—Å–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `st.session_state` –Ω–∞–ø—Ä—è–º—É—é, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫—É –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Streamlit.

### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `hasattr(st, 'session_state')` –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `None` –ø–µ—Ä–µ–¥ –ª—é–±—ã–º –æ–±—Ä–∞—â–µ–Ω–∏–µ–º –∫ `st.session_state`:

```python
def safe_session_get(key, default=None):
    """–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ session_state."""
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ session_state –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
        if not hasattr(st, 'session_state') or st.session_state is None:
            return default
        return st.session_state.get(key, default)
    except (RuntimeError, AttributeError, KeyError, TypeError) as e:
        if DEBUG_MODE:
            # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º st.warning –∑–¥–µ—Å—å, —Ç–∞–∫ –∫–∞–∫ st –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
            print(f"‚ö†Ô∏è DEBUG: –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ session_state['{key}']: {e}")
        return default
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ `hasattr(st, 'session_state')` –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ `st.session_state is None`
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `print()` –≤–º–µ—Å—Ç–æ `st.warning()` –≤ –±–ª–æ–∫–µ except (—Ç–∞–∫ –∫–∞–∫ `st` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω)
4. –î–æ–±–∞–≤–ª–µ–Ω `TypeError` –≤ —Å–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

---

## ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –ø—Ä—è–º—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ session_state

### –ó–∞–º–µ–Ω–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ predictions** (—Å—Ç—Ä–æ–∫–∏ 757-772)
   - `if "predictions_dir" in st.session_state` ‚Üí `safe_session_get("predictions_dir")`
   - `st.session_state.predictions_dir` ‚Üí `safe_session_get("predictions_dir")`

2. **–ö—ç—à predictions** (—Å—Ç—Ä–æ–∫–∏ 779-782)
   - `predictions_cache_key in st.session_state` ‚Üí `safe_session_has(predictions_cache_key)`
   - `st.session_state[predictions_cache_key]` ‚Üí `safe_session_get(predictions_cache_key)`

3. **–í—ã–±–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤** (—Å—Ç—Ä–æ–∫–∏ 1228-1232)
   - `if "df_features_for_selection" in st.session_state` ‚Üí `safe_session_get("df_features_for_selection")`
   - –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `st.session_state.selected_features` ‚Üí `safe_session_get/set("selected_features")`

4. **–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞** (—Å—Ç—Ä–æ–∫–∏ 833-844)
   - `if key in st.session_state` ‚Üí `safe_session_del(key)`
   - `del st.session_state[key]` ‚Üí `safe_session_del(key)`

5. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤** (—Å—Ç—Ä–æ–∫–∏ 1434-1564)
   - –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `st.session_state.selected_features` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
   - –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `"selected_features" in st.session_state` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `safe_session_has("selected_features")`

---

## üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü—Ä–∏ `DEBUG_MODE = True` –æ—à–∏–±–∫–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è —á–µ—Ä–µ–∑ `print()`, –∞ –Ω–µ `st.warning()`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π.

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–í—Å–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å:
1. –ü—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ `session_state` –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º
2. –í–æ–∑–≤—Ä–∞—â–∞—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
3. –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `st.warning()` –≤ –±–ª–æ–∫–µ except (–∏—Å–ø–æ–ª—å–∑—É—é—Ç `print()`)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–û—Ç–∫—Ä–æ–π—Ç–µ dashboard –≤ –Ω–æ–≤–æ–º –±—Ä–∞—É–∑–µ—Ä–µ/—Å–µ—Å—Å–∏–∏**
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –æ—à–∏–±–∫–∏ "Tried to use SessionInfo before it was initialized"
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π:**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
   - –í—ã–±–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
   - –ó–∞–≥—Ä—É–∑–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Streamlit (–æ–±—ã—á–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏–ª–∏ `~/.streamlit/logs/`)
2. –ù–∞–π–¥–∏—Ç–µ —Ç–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏ –≤ —Å—Ç–µ–∫-—Ç—Ä–µ–π—Å–µ
3. –°–æ–æ–±—â–∏—Ç–µ - –¥–æ–±–∞–≤–ª—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∑–∞—â–∏—Ç—É –¥–ª—è —ç—Ç–æ–≥–æ –º–µ—Å—Ç–∞

